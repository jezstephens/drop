/*! drop 0.5.4 */
!function(t,e){"function"==typeof define&&define.amd?define(["tether"],e):"object"==typeof exports?module.exports=e(require("tether")):t.Drop=e(t.Tether)}(this,function(t){return function(){var e,n,o,i,s,r,p,h,a,u,l,c,d,f,v,m,g,y,x={}.hasOwnProperty,P=function(t,e){function n(){this.constructor=t}for(var o in e)x.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};y=t.Utils,h=y.extend,o=y.addClass,l=y.removeClass,a=y.hasClass,e=y.Evented,v="ontouchstart"in document.documentElement,s=["click"],v&&s.push("touchstart"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},m="";for(u in g)p=g[u],f=document.createElement("p"),void 0!==f.style[u]&&(m=p);d=function(t){var e,n,o,i;return o=t.split(" "),e=o[0],n=o[1],("left"===e||"right"===e)&&(i=[n,e],e=i[0],n=i[1]),[e,n].join(" ")},n={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},i={},c=function(t,e){var n,o;for(o=[];-1!==(n=t.indexOf(e));)o.push(t.splice(n,1));return o},r=function(p){var u,f,v,g;return null==p&&(p={}),v=function(){return function(t,e,n){n.prototype=t.prototype;var o=new n,i=t.apply(o,e);return Object(i)===i?i:o}(u,arguments,function(){})},h(v,{createContext:r,drops:[],defaults:{}}),f={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}},h(v,f,p),h(v.defaults,f.defaults,p.defaults),null==i[g=v.classPrefix]&&(i[g]=[]),v.updateBodyClasses=function(){var t,e,n,s,r;for(t=!1,r=i[v.classPrefix],n=0,s=r.length;s>n;n++)if(e=r[n],e.isOpened()){t=!0;break}return t?o(document.body,""+v.classPrefix+"-open"):l(document.body,""+v.classPrefix+"-open")},u=function(e){function r(t){if(this.options=t,this.options=h({},v.defaults,this.options),this.target=this.options.target,null==this.target)throw new Error("Drop Error: You must provide a target.");this.options.classes&&o(this.target,this.options.classes),v.drops.push(this),i[v.classPrefix].push(this),this._boundEvents=[],this.setupElements(),this.setupEvents(),this.setupTether()}return P(r,e),r.prototype._on=function(t,e,n){return this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)},r.prototype.setupElements=function(){var t=this;return this.drop=document.createElement("div"),o(this.drop,v.classPrefix),this.options.classes&&o(this.drop,this.options.classes),this.content=document.createElement("div"),o(this.content,""+v.classPrefix+"-content"),"function"==typeof this.options.content?(this.content.innerHTML=this.options.content.call(this,this),this.on("open",function(){return t.content.innerHTML=t.options.content.call(t,t)})):"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content,this.drop.appendChild(this.content)},r.prototype.setupTether=function(){var e,o;return o=this.options.position.split(" "),o[0]=n[o[0]],o=o.join(" "),e=[],e.push(this.options.constrainToScrollParent?{to:"scrollParent",pin:"top, bottom",attachment:"together none"}:{to:"scrollParent"}),e.push(this.options.constrainToWindow!==!1?{to:"window",attachment:"together"}:{to:"window"}),p={element:this.drop,target:this.target,attachment:d(o),targetAttachment:d(this.options.position),classPrefix:v.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:e},this.options.tetherOptions!==!1?this.tether=new t(h({},p,this.options.tetherOptions)):void 0},r.prototype.setupEvents=function(){var t,e,n,o,i,r,p,h,a,u,l=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));if(n=this.options.openOn.split(" "),b.call(n,"click")>=0)for(i=function(t){return l.toggle(),t.preventDefault()},e=function(t){return!l.isOpened()||t.target===l.drop||l.drop.contains(t.target)||t.target===l.target||l.target.contains(t.target)?void 0:l.close()},a=0,u=s.length;u>a;a++)t=s[a],this._on(this.target,t,i),this._on(document,t,e);return b.call(n,"hover")>=0?(o=!1,h=function(){return o=!0,l.open()},p=null,r=function(){return o=!1,null!=p&&clearTimeout(p),p=setTimeout(function(){return o||l.close(),p=null},50)},this._on(this.target,"mouseover",h),this._on(this.drop,"mouseover",h),this._on(this.target,"mouseout",r),this._on(this.drop,"mouseout",r)):void 0}},r.prototype.isOpened=function(){return a(this.drop,""+v.classPrefix+"-open")},r.prototype.toggle=function(){return this.isOpened()?this.close():this.open()},r.prototype.open=function(){var t,e,n=this;if(!this.isOpened())return this.drop.parentNode||document.body.appendChild(this.drop),null!=(t=this.tether)&&t.enable(),o(this.drop,""+v.classPrefix+"-open"),o(this.drop,""+v.classPrefix+"-open-transitionend"),setTimeout(function(){return o(n.drop,""+v.classPrefix+"-after-open")}),null!=(e=this.tether)&&e.position(),this.trigger("open"),v.updateBodyClasses()},r.prototype.close=function(){var t,e,n=this;if(this.isOpened())return l(this.drop,""+v.classPrefix+"-open"),l(this.drop,""+v.classPrefix+"-after-open"),this.drop.addEventListener(m,t=function(){return a(n.drop,""+v.classPrefix+"-open")||l(n.drop,""+v.classPrefix+"-open-transitionend"),n.drop.removeEventListener(m,t)}),this.trigger("close"),null!=(e=this.tether)&&e.disable(),v.updateBodyClasses(),this.options.remove?this.remove():void 0},r.prototype.remove=function(){var t;return this.close(),null!=(t=this.drop.parentNode)?t.removeChild(this.drop):void 0},r.prototype.position=function(){var t;return this.isOpened()&&null!=(t=this.tether)?t.position():void 0},r.prototype.destroy=function(){var t,e,n,o,s,r,p,h;for(this.remove(),null!=(r=this.tether)&&r.destroy(),p=this._boundEvents,o=0,s=p.length;s>o;o++)h=p[o],t=h.element,e=h.event,n=h.handler,t.removeEventListener(e,n);return this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,c(i[v.classPrefix],this),c(v.drops,this)},r}(e),v},window.Drop=r(),document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}.call(this),Drop});